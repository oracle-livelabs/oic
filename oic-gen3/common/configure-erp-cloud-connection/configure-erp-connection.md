# ERP Cloud Connection

## Introduction

This lab walks you through the steps to configure the ERP Cloud Adapter connection.

Estimated Time: 10 minutes

### Objectives

In this lab, you will:

* Understand different authentication schemes supported by ERP Cloud Adapter

### Prerequisites

This lab assumes you have:

* All previous labs successfully completed.

##	Task	1: ERP Cloud Adapter Authentication schemes
1. Before you can build an integration, you have to create the connections to the applications with which you want to share data. Each adapter varies in authentication scheme and connection properties it supports.

    The Adapter Security Authentication scheme supports multiple options connecting to ERP Cloud

- Username Password Token
- Username Password Token with PGP Key Support
- OAuth Authorization Code Credentials

    ![Security Authentication Schemes](./images/adapter-security-auth-schemes.png)

### *Username Password Token*
- Configure the ERP Cloud Integration Account Credentials and test the connection.

### *Username Password Token With PGP Key Support*
- PGP Key is required to encrypt files ex. Uploading company sensitive information and financial transactions (like journal entries, invoices, payments and bank records) into UCM. Data encryption is a critical and essential element in implementing integrations with Oracle ERP Cloud. ERP Cloud adapter supports an encryption algorithm for the public key with RSA and the key size must be 1024 bits in length.

    ![PGP Key Auth scheme](./images/security-auth-scheme-pgpkey.png)

### *Generate PGP Key in ERP Cloud*
- Oracle ERP Cloud supports Pretty Good Privacy (PGP) unsigned encryption with 1024 key size. There are two types of encryption keys:

    1. Oracle ERP Cloud Key – The Key is generated by the ERP cloud
    2. Customer Key – The key is generated by the Customer and the public key is imported into ERP Cloud. This is a case where ERP Cloud encrypts the data file extract

- In ERP Cloud Navigate to Security Console &gt; Certificates and select Generate and enter the relevant information. The certificate type should be PGP for uploading using OIC ERP Cloud Adapter

    ![ERP Cloud PGP Key](./images/saas-pgp-key.png)
    Export the Public Key

    ![ERP Cloud Export PGP Key](./images/saas-export-pgp-key.png)

### *OAuth Authorization Code Credentials*

- Fusion Applications offers support for OAuth through SIM federation with an Identity Manager that can function as an OAuth provider that complies with RFC 6749. IDCS (Identity Cloud Service) is one such provider. ERP Cloud Adapter supports OAuth Code Credentials security policy to invoke REST/SOAP API in addition to Business Events.

    High-level Workflow to Configure OAuth Authorization Code Credentials
    ![OAuth Connection Config Steps](./images/oauth-connection-config-steps.png)

    ![OAuth Connection Config in OIC](./images/oauth-connection-config-oic.png)

 Reference Resources:

Step 1: [Enable Oracle Fusion Applications  Federation and OAuth Trust with IDCS](https://docs.oracle.com/en/solutions/create-approval-process-digital-assets/enable-oracle-fusion-applications-cloud-service-federation-and-oauth-trust-oracle-identity-cloud-ser1.html#GUID-53C8A800-3DC3-48F0-930E-11797185406B)

Step 2: [Create OAuth Client in IDCS](https://docs.oracle.com/en/cloud/paas/integration-cloud/erp-adapter/prerequisites-creating-connection.html#GUID-041C0019-F8BE-4262-8529-DBECD4F4AA31)

Step 3: [Configure OAuth Security Policy information in ERP Cloud Adapter](https://docs.oracle.com/en/cloud/paas/integration-cloud/erp-adapter/create-connection.html#GUID-14DB5A84-DC57-46EC-A91C-F4EA3D080023)

##	Task	2: Create an ERP Cloud Adapter Connection
Create a connection with the Oracle ERP Cloud Adapter.

1. Show the left Navigation menu, and click ***Design*** &gt; ***Connections***.
2. Click ***Create***.
3. In the *Create Connection* dialog, select the ***Oracle ERP Cloud*** adapter to use for this connection. To find the adapter, enter `erp` in the search field. Click on the highlighted adapter.
4. In the *Create Connection* dialog, enter the following information and click on ***Create***:

    | **Field**        | **Value**          |       
    | --- | ----------- |
    | Name         | `ERP Cloud`       |
    | Description  | `ERP Cloud Connection for OIC LiveLabs` |


    Keep all other values as default.

5. In the *Oracle ERP Cloud Connection* dialog, enter the following information:

    | **Field**  | **Values** |
    |---|---|
    |ERP Cloud Host | `your-erp-host-name` |
    |Security Policy | **Username Password Token**|
    |Username | `<erp-username>`|
    |Password | `<erp-password>`|


6. Click on ***Test*** and wait until you receive a
confirmation box that the test was successful.

    > **Note:** The first time you run the test, it could take up to 2 minutes for completion.

7. Click ***Save*** and wait for the confirmation box. Exit the connection canvas by clicking the back button on the top left side of the screen.

You may now **proceed to the next lab**.

## Learn More

* [Getting Started with Oracle Integration 3](https://docs.oracle.com/en/cloud/paas/application-integration/index.html)
* [Using the Oracle ERP Cloud Adapter with Oracle Integration 3](https://docs.oracle.com/en/cloud/paas/application-integration/erp-adapter/oracle-erp-cloud-adapter-capabilities.html)


## Acknowledgements

* **Author** - Kishore Katta, Product Management, Oracle Integration
* **Contributors** - Subhani Italapuram, Product Management, Oracle Integration
* **Last Updated By/Date** - Subhani Italapuram, Jan 2023
