## Create Robot Flow

### Objectives

In this lab, you will:

* Create a Robot
* Add Robot Actions

### Prerequisites

This lab assumes you have:

* Completed the Robot Connections

## Task 1: Create a Robot

When you create a robot, you define its trigger and the actions that the robot performs.

1. In the navigation pane, select **Projects** and then click on the project created in the previous lab.

2. On the right side of the page, go to the **Robots** box and click **+ (Add)**.

3. In the **Create robot** panel, fill in the following fields:
    | **Field** | **Required** | **Value** |
    | --- | ----------- | ----------- |
    | Name          | Yes | Enter a name for the robot connection type. <br> For example: `LiveLabs Robot Flow`       |
    | Identifier    | Yes | This entry is autogenerated based on the Name value.  |
    | Version       | Yes | Keep as default: `1.00.00` |
    | Description   | No  | Provide additional information about the robot.|
    | Keywords      | No  | Enter text that people might use to search for the robot. |
    | | | |

    ![Create robot flow panel](images/create-robot-add.png " ")

4. Click **Create**.

Robot Designer will appear. The flow includes an Open Application action that is undefined.
![Robot Designer Canvas](images/robot-designer_after-create.png " ")

## Task 2: Specify the trigger

The trigger defines the interface for the robot, including the input (incoming request) and the output (outgoing response). For this lab, we will provide a purchase order number as input, and capture the supplier name as output.

1. Select ![Create robot flow panel](images/click-to-edit-trigger-button-small.png " ") **(Click to edit trigger)**

    The trigger panel will appear on the screen.

2. On the **Input** tab, click **+ (Add)** and enter the following Input property values:

    * Name: `PONumber`
    * Type: `String` (default)

3. Select the **Output** tab, click **+ (Add)** and enter the following Output property values:

    * Name: `SupplierName`
    * Type: `String` (default)

4. Click **OK**.



## Task 3: Define Open Application Action

This action tells the robot to open a web browser and navigate to the Oracle ERP Cloud sign-in page. We will define a Robot Connection, based on a Robot Connection Type, containing the URL and credentials to the ERP Cloud login page.

1. Double-click on the **Open Application** action.
    ![Select robot connections button](images/robot-designer_open-browser_edit.png " ")

2. In the **Open Browser** panel, enter a **Name** and **Description** for the action.

3. Next, we will assign the target URL dynamically using a Robot Connection. On the **Input** tab, select within the **URL** field and click on the **Robot connections** icon ![Select robot connections button](images/robot-connections-button.png " ").

    The **Robot connections** side panel will appear, without any available robot connections.

4. On the **Robot connections** side panel, create a new connection to the target page by clicking on **+ (Add)**.

5. On the **Create robot connection** panel, select the Default connection type **Oracle RPA Web Login**.

    ![Create robot flow panel](images/create-robot-connection_select-type.png " ").

6. In the **Create robot connection** panel, fill in the following fields:
    | **Field** | **Required** | **Value** |
    | --- | ----------- | ----------- |
    | Name        | Yes | Enter a name for the login page. <br> For example: `LiveLabs ERP Cloud Login` |
    | Identifier  | Yes | This entry is autogenerated based on the Name value.  |
    | Description | No  | Provide additional information about the robot connection.|
    | URL         | Yes | Enter your ERP Cloud login URL. Please follow this format: <br>`https://<your-erp-cloud-hostname>/fscmUI/faces/FuseWelcome?fndThemeName=Vision_Default`  |
    | Username    | Yes  | Enter the username.|
    | Password    | Yes  | Enter the password for the selected user. |
    | | | |

    ![Create robot flow panel](images/create-robot-connection_configured.png " ").

7. Click **Create**.

8. Returning to the **Robot connections** side panel, expand the newly created Robot Connection. Next, drag the **URL** parameter to the matching field under the **Input** tab.

    ![Drag the URL parameter to the Input tab](images/robot-designer_open-browser_assign-url.png " ")

9. Under **Browser**, select the browser which will be used by the robot flow. Keep all other values as default.

10. Click **OK** when done, then **Save**.

## Task 4: Add Robot Login Action using the Record option

Build the robot flow by adding actions using the recorder.

1. Open a new browser tab and navigate to the login page of ERP Cloud. This is the URL value which was set in the web login panel.

    ![ERP Cloud login](images/robot-designer_erp-login.png " ").

2. Return to the browser tab running the robot designer. Select the **Open Application** action. This will enable the record button. ![Record button enabled](images/robot-designer_record-button.png " ").

3. On the **Smart Record** panel, click **Select browser tab to target**.
    ![Select browser tab](images/robot-designer_smart-record_select-browser.png " ")

    This starts the recorder on the ERP Cloud login page.

4. On the **RPA Smart Recording** panel, click on **Begin Recording**.

    We will now select field elements to generate associated Actions in the robot flow.

5. Hover the mouse over the **User ID** field until it lights-up green, and select it.
![Select browser tab](images/robot-designer_smart-record_select-user-id.png " ")

    This adds an action `Enter "User ID" Text` to the robot flow.

    > **Note:** When using the recorder, wait until the target icon appears, the field turns green, and your mouse icon changes to a hand before selecting the UI element.

    Next we set the **Value** field by mapping the **Username** input variable.

6. On the **Action Details** panel, within the **Value** field, select the **Robot connections** icon ![Select robot connections button](images/robot-connections-button.png " "). On the **Robot connections** side panel, expand the created robot connection and drag the **username** parameter to the **Value** field.

7. For the **Test value** field, enter a valid EPR username. For example `calvin.roth`.

8. Click **Save**.

    > **Note:** We add valid test values to allow the login to work and move to the next screen in the browser.

9. Next, hover the mouse over the **Password** field until it lights-up green, and select it.

10. Map the robot connection **password** parameter to the **Value** field.

11. For the **Test value** field, enter a valid ERP password.

12. Click **Save**.

13. Next, hover the mouse over the **Sign In** button until it lights-up green, and select it.

14. On the **Action Details** panel, keep all values as default and click **Save**.

15. Return to the browser tab running the robot designer. Click **Save** in the robot designer.

    Your current (incomplete) flow should look as follows:

    ![Current flow until sign-in](images/robot-designer_flow_sign-in-complete.png " ")

> **Note:** When clicking a button or link in recorder mode, the following events occur:
    > 1. The operation is added as action to the robot flow.
    > 2. The browser performs the actual UI operation.

## Task 5: Add Robot ERP Actions using the Record option

Continue the robot flow by adding actions from ERP Cloud using the recorder. After sign-in in the previous task, you should now be on the ERP Cloud landing page.

1. From the top menu in ERP Cloud, click on **Procurement** when the icon changed to a target. In the **Action Details**, keep all values as default and click **Save**. This will add the action `Click "Procurement"` and move to the procurement element.

2. Click on **Purchase Orders** when the complete tile is shaded and changed to a target. In the **Action Details**, keep all values as default and click **Save**. This will add the `Click "Purchase Orders"` action and move to the purchase orders element.

3. On the **Overview** page, move to the right of the screen and select the **Tasks** icon when the icon changes to a target.
    ![Select Tasks icon](images/erp-cloud_select-tasks.png " ")

    In the **Action Details**, keep all values as default and click **Save**. This will add the `Click "Tasks"` action and display a side panel.

4. On the side panel, go to the **Orders** section and click on **Manage Orders** when the icon changes to a target. In the **Action Details**, keep all values as default and click **Save**. This will add the `Click "Manage Orders"` action and move to the Manage Orders page.

    Next, we will search for a specific Purchase Order by providing an order number. 

5. Move to the **Order** field and select the UI element when the icon changes to a target. Enter the following values in the **Action Details**.

    * Name: `Enter "PO number" Text`
    * Value: In the field, click ![Select Flow button](images/action-details_po-number_flow-button.png " ") **(Flow Input/Output)** and select the **Input** property **PONumber**. Double-click the property to have it mapped to the **Value** field.
    * Test value: Enter a valid `PO Number` which will be used in the search query to pull an actual purchase order. Example: `US164712`

    ![PO Number action details](images/action-details_po-number.png " ")

6. Click **Save**.

7. Click on **Search** when the complete tile is shaded and changed to a target. In the **Action Details**, keep all values as default and click **Save**. This will add the `Click "Search"` action and display the search results containing the specified purchase order.

8. For the listed purchase order, move to the **Supplier** column and select the supplier name after the icon changes to a target. Enter the following values in the **Action Details**.
    * Name: `Click "Get supplier name"`
    * Action: Get Text
    * Save To: Select ![Select Flow button](images/action-details_po-number_flow-button.png " ") **(Flow Input/Output)**, switch to **Output** and double-click on **SupplierName**. 

9. Click **Save**.

10. In the "Smart Recording" panel, click on ![Smart Recording stop button](images/smart-recording_stop-button.png " ") **(Stop recording)** to end the recording.

11. In the **Robot Designer**, click on **Save**. 

12. Close the robot designer by clicking on the **< (Go back)** button on the top left of the screen.

13. For the selected robot, click on **...** and select **Add Environment Pool**.

14. In the **Add Environment pool**, select the existing environment pool and click **Add**.

    ![Smart Recording stop button](images/environment-pool_add.png " ")

    The status of your robot should change to **Configured**.

15. For the selected robot, click on **...** and select **Activate**.


## Acknowledgements
* **Author** - Ravi Chablani, Principal Product Manager - Oracle Integration
* **Last Updated By/Date** - Ravi Chablani, March 2024
